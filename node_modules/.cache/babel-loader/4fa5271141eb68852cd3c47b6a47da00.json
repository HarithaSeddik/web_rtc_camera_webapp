{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nexport function useUserMedia(requestedMedia) {\n  _s();\n\n  const [mediaStream, setMediaStream] = useState(null);\n  navigator.getUserMedia = navigator.mediaDevices.getUserMedia || navigator.mediaDevices.mozGetUserMedia || navigator.mediaDevices.msGetUserMedia || navigator.mediaDevices.webkitGetUserMedia;\n  useEffect(() => {\n    async function enableStream() {\n      try {\n        const stream = await navigator.mediaDevices.getUserMedia(requestedMedia);\n        setMediaStream(stream);\n        const localVideo = document.getElementById(\"local-video\");\n        console.log(`[FROM USEUSERMEDIA] ${localVideo}`);\n\n        if (localVideo) {\n          console.log(`[FROM USEUSERMEDIA] ${localVideo}`);\n          localVideo.srcObject = stream;\n        }\n      } catch (err) {\n        console.log(`Error while fetching media stream.. ${err}`);\n      }\n    }\n\n    if (!mediaStream) {\n      enableStream();\n    } else {\n      return function cleanup() {\n        mediaStream.getTracks().forEach(track => {\n          track.stop();\n        });\n      };\n    }\n  }, [mediaStream, requestedMedia]);\n  return mediaStream;\n}\n\n_s(useUserMedia, \"oKgeb410CvQ1KtUfT16n/lY1/DA=\");","map":{"version":3,"names":["useState","useEffect","useUserMedia","requestedMedia","mediaStream","setMediaStream","navigator","getUserMedia","mediaDevices","mozGetUserMedia","msGetUserMedia","webkitGetUserMedia","enableStream","stream","localVideo","document","getElementById","console","log","srcObject","err","cleanup","getTracks","forEach","track","stop"],"sources":["/Users/kobil/Workspace/React_Projects/camera-webapp-poc/src/components/CameraPage/components/UserUserMedia.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\n\nexport function useUserMedia(requestedMedia) {\n  const [mediaStream, setMediaStream] = useState(null);\n\n  navigator.getUserMedia =\n    navigator.mediaDevices.getUserMedia ||\n    navigator.mediaDevices.mozGetUserMedia ||\n    navigator.mediaDevices.msGetUserMedia ||\n    navigator.mediaDevices.webkitGetUserMedia;\n\n  useEffect(() => {\n    async function enableStream() {\n      try {\n        const stream = await navigator.mediaDevices.getUserMedia(\n          requestedMedia\n        );\n        setMediaStream(stream);\n        const localVideo = document.getElementById(\"local-video\");\n        console.log(`[FROM USEUSERMEDIA] ${localVideo}`)\n        if (localVideo) {\n          console.log(`[FROM USEUSERMEDIA] ${localVideo}`)\n                localVideo.srcObject = stream;\n              }\n\n      } catch (err) {\n                console.log(`Error while fetching media stream.. ${err}`);\n      }\n    }\n\n    if (!mediaStream) {\n      enableStream();\n    } else {\n      return function cleanup() {\n        mediaStream.getTracks().forEach((track) => {\n          track.stop();\n        });\n      };\n    }\n  }, [mediaStream, requestedMedia]);\n\n  return mediaStream;\n}\n"],"mappings":";;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AAEA,OAAO,SAASC,YAAT,CAAsBC,cAAtB,EAAsC;EAAA;;EAC3C,MAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCL,QAAQ,CAAC,IAAD,CAA9C;EAEAM,SAAS,CAACC,YAAV,GACED,SAAS,CAACE,YAAV,CAAuBD,YAAvB,IACAD,SAAS,CAACE,YAAV,CAAuBC,eADvB,IAEAH,SAAS,CAACE,YAAV,CAAuBE,cAFvB,IAGAJ,SAAS,CAACE,YAAV,CAAuBG,kBAJzB;EAMAV,SAAS,CAAC,MAAM;IACd,eAAeW,YAAf,GAA8B;MAC5B,IAAI;QACF,MAAMC,MAAM,GAAG,MAAMP,SAAS,CAACE,YAAV,CAAuBD,YAAvB,CACnBJ,cADmB,CAArB;QAGAE,cAAc,CAACQ,MAAD,CAAd;QACA,MAAMC,UAAU,GAAGC,QAAQ,CAACC,cAAT,CAAwB,aAAxB,CAAnB;QACAC,OAAO,CAACC,GAAR,CAAa,uBAAsBJ,UAAW,EAA9C;;QACA,IAAIA,UAAJ,EAAgB;UACdG,OAAO,CAACC,GAAR,CAAa,uBAAsBJ,UAAW,EAA9C;UACMA,UAAU,CAACK,SAAX,GAAuBN,MAAvB;QACD;MAER,CAZD,CAYE,OAAOO,GAAP,EAAY;QACJH,OAAO,CAACC,GAAR,CAAa,uCAAsCE,GAAI,EAAvD;MACT;IACF;;IAED,IAAI,CAAChB,WAAL,EAAkB;MAChBQ,YAAY;IACb,CAFD,MAEO;MACL,OAAO,SAASS,OAAT,GAAmB;QACxBjB,WAAW,CAACkB,SAAZ,GAAwBC,OAAxB,CAAiCC,KAAD,IAAW;UACzCA,KAAK,CAACC,IAAN;QACD,CAFD;MAGD,CAJD;IAKD;EACF,CA5BQ,EA4BN,CAACrB,WAAD,EAAcD,cAAd,CA5BM,CAAT;EA8BA,OAAOC,WAAP;AACD;;GAxCeF,Y"},"metadata":{},"sourceType":"module"}